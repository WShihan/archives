"use strict";(self["webpackChunkmy_app_vue"]=self["webpackChunkmy_app_vue"]||[]).push([[869],{9869:function(e,o,n){n.r(o),n.d(o,{default:function(){return v}});var a=n(3396),l=n(9242);const s=e=>((0,a.dD)("data-v-46e04657"),e=e(),(0,a.Cn)(),e),r={class:"login-panel"},t={class:"login-from"},i=s((()=>(0,a._)("h2",{style:{margin:"0px auto 0.66rem"}},"登陆控制台",-1))),d=s((()=>(0,a._)("i",{class:"icon iconfont icon-user"},null,-1))),u=s((()=>(0,a._)("i",{class:"icon iconfont icon-password"},null,-1))),m=(0,a.Uk)("登陆");function p(e,o,n,s,p,c){const g=(0,a.up)("el-input"),h=(0,a.up)("el-form-item"),w=(0,a.up)("el-button"),f=(0,a.up)("el-form"),_=(0,a.Q2)("loading");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",t,[i,(0,a.Wm)(f,{ref:"loginForm",modelValue:p.loginForm,"onUpdate:modelValue":o[2]||(o[2]=e=>p.loginForm=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(g,{ref:"username",modelValue:p.loginForm.username,"onUpdate:modelValue":o[0]||(o[0]=e=>p.loginForm.username=e),placeholder:"请输入用户名"},{prefix:(0,a.w5)((()=>[d])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(g,{ref:"password",onKeyup:(0,l.D2)(c.handleLogin,["enter"]),modelValue:p.loginForm.password,"onUpdate:modelValue":o[1]||(o[1]=e=>p.loginForm.password=e),"show-password":"",placeholder:"请输入密码"},{prefix:(0,a.w5)((()=>[u])),_:1},8,["onKeyup","modelValue"])])),_:1}),(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(w,{type:"primary",onClick:c.handleLogin,style:{width:"100%"}},{default:(0,a.w5)((()=>[m])),_:1},8,["onClick"])])),_:1})])),_:1},8,["modelValue"])])),[[_,p.loading]])])}var c=n(7580),g=n(835),h=n(4239);let w=h.h;var f={name:"Login",components:{},data(){return{loginForm:{username:"",password:""},loading:!1}},setup(){},mounted(){""===this.loginForm.username?this.$refs.username.focus():""===this.loginForm.password&&this.$refs.password.focus()},unmounted(){},methods:{validateUsername(){return!(this.loginForm.username.length<=2&""===this.loginForm.username)||(g.X.warning("用户名不正确"),!1)},validatePassword(){return!(this.loginForm.password.length<=3&""===this.loginForm.password)||(g.X.warning("密码长度小于8位"),!1)},handleLogin(){this.loading=!0,this.validatePassword()&&this.validateUsername()&&(0,c.x4)(this.loginForm).then((e=>{if(!e.data.status)throw e.data.msg;g.X.success("登陆成功"),console.log(e.data.data.token),w.setToken(e.data.data.token),this.$router.push({name:"index"})})).catch((e=>{console.error(e),g.X.error("登陆错误！")})).finally((()=>{this.loading=!1}))}},watch:{},computed:{}},_=n(89);const F=(0,_.Z)(f,[["render",p],["__scopeId","data-v-46e04657"]]);var v=F}}]);
//# sourceMappingURL=869.76f8adcf.js.map