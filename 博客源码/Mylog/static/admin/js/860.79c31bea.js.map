{"version":3,"file":"static/admin/js/860.79c31bea.js","mappings":"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","sources":["webpack://my_app_vue/./src/pages/dashboard/overview/page-view/index.vue","webpack://my_app_vue/./src/pages/dashboard/overview/page-view/index.vue?fd88"],"sourcesContent":["<template>\n  <div class=\"today\" v-loading=\"loading\">\n    <div class=\"opt\">\n      <input type=\"date\" v-model=\"date\" />\n    </div>\n    <ElTable :data=\"todayView\" row-key=\"time\">\n      <ElTableColumn\n        prop=\"ip\"\n        width=\"130\"\n        label=\"IP\"\n        :filters=\"getFilterData('ip')\"\n        :filter-method=\"filterHandler\"\n      />\n      <ElTableColumn\n        prop=\"province\"\n        width=\"80\"\n        label=\"省\"\n        :filters=\"getFilterData('province')\"\n        :filter-method=\"filterHandler\"\n      />\n      <ElTableColumn\n        prop=\"city\"\n        width=\"80\"\n        label=\"市\"\n        :filters=\"getFilterData('city')\"\n        :filter-method=\"filterHandler\"\n      />\n      <ElTableColumn prop=\"enter\" width=\"80\" label=\"进入\" />\n      <ElTableColumn prop=\"leave\" width=\"120\" label=\"离开\" />\n      <ElTableColumn\n        prop=\"page\"\n        label=\"页面\"\n        :filters=\"getFilterData('page')\"\n        :filter-method=\"filterHandler\"\n      />\n      <ElTableColumn\n        prop=\"referer\"\n        width=\"200\"\n        label=\"来源\"\n        :filters=\"getFilterData('referer')\"\n        :filter-method=\"filterHandler\"\n      />\n      <ElTableColumn\n        prop=\"stay\"\n        label=\"停留/s\"\n        :filters=\"getFilterData('stay')\"\n        :filter-method=\"filterHandler\"\n      />\n      <ElTableColumn\n        prop=\"user\"\n        label=\"用户类型\"\n        :filters=\"getFilterData('user')\"\n        :filter-method=\"filterHandler\"\n      />\n    </ElTable>\n    <Refresh @refresh=\"updateData\" />\n  </div>\n</template>\n\n<script>\nimport {  ppv_records } from '@/apis/index.js';\nimport CollapseItem from '@/components/collapse/CollapseItem.vue';\nimport {fmtNowDate} from '@/utils/tool';\n\n\nexport default {\n  name: 'today',\n  components: [CollapseItem],\n  data() {\n    return {\n      todayView: [],\n      loading: false,\n      date: '',\n    };\n  },\n  computed: {\n    filters() {\n      let dataMap = {};\n      this.todayView.forEach(item => {\n        for (let k in item) {\n          if (dataMap[k]) {\n            if (!dataMap[k].includes(item[k])) {\n              dataMap[k].push(item[k]);\n            }\n          } else {\n            dataMap[k] = [item[k]];\n          }\n        }\n      });\n      return dataMap;\n    },\n  },\n  watch: {\n    date(val) {\n      this.updateData();\n    },\n  },\n  beforeMount() {\n    this.date = fmtNowDate()\n  },\n\n  methods: {\n    getFilterData(col) {\n      let data = this.filters[col];\n      if (data) {\n        return data.map(item => {\n          return { text: item, value: item };\n        });\n      } else return [];\n    },\n    filterHandler(val, row, col) {\n      const property = col['property'];\n      return row[property] === val;\n    },\n    updateData() {\n      this.todayView.length = 0;\n      this.loading = true;\n      ppv_records({date: this.date })\n        .then(res => {\n          if (res.data.data) {\n            this.todayView.push(...res.data.data);\n          }\n        })\n        .finally(() => {\n          this.loading = false;\n        });\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.today {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  .opt {\n    display: flex;\n    input {\n      flex: 1;\n    }\n  }\n}\n</style>\n","import { render } from \"./index.vue?vue&type=template&id=629c11f2&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=629c11f2&scoped=true&lang=scss\"\n\nimport exportComponent from \"/Users/wsh/Desktop/repos/mylog-admin/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-629c11f2\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_createElementVNode","type","$data","$event","_createVNode","_component_ElTable","data","_component_ElTableColumn","prop","width","label","filters","$options","_component_Refresh","onRefresh","name","components","CollapseItem","todayView","loading","date","computed","dataMap","this","forEach","item","k","includes","push","watch","val","updateData","beforeMount","fmtNowDate","methods","getFilterData","col","map","text","value","filterHandler","row","property","length","ppv_records","then","res","finally","__exports__","render"],"sourceRoot":""}