"use strict";(self["webpackChunkmy_app_vue"]=self["webpackChunkmy_app_vue"]||[]).push([[282],{7282:function(t,e,i){i.r(e),i.d(e,{default:function(){return p}});var s=i(3396),l=i(9242);const n={class:"audit"},a={class:"btns",style:{display:"flex","justify-content":"center","align-items":"center",gap:"1rem"}};function o(t,e,i,o,m,d){const c=(0,s.up)("CustomTable"),r=(0,s.up)("Refresh"),u=(0,s.up)("wsh-button"),h=(0,s.up)("Dialog"),p=(0,s.Q2)("loading");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(c,{datas:m.comments,onSelect:d.rowClick,total:1,props:m.propMap},null,8,["datas","onSelect","props"]),(0,s.Wm)(r,{onRefresh:d.initCmts},null,8,["onRefresh"]),(0,s.Wm)(l.uT,{name:"fade"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(h,{title:"操作评论",onClose:e[0]||(e[0]=t=>m.dialogVisible=!1)},{footer:(0,s.w5)((()=>[(0,s._)("div",a,[(0,s.Wm)(u,{showComfirm:"",type:"danger",text:"删除",onComfirm:d.commentDelete},null,8,["onComfirm"]),(0,s.Wm)(u,{type:"success",showComfirm:"",text:"变更审核",onComfirm:d.commentAudit},null,8,["onComfirm"])])])),_:1},512),[[l.F8,m.dialogVisible]])])),_:1})])),[[p,m.loading]])}var m=i(7580),d=i(835),c=i(506),r={name:"mylog-comment",components:[c["default"]],data(){return{comments:[],dialogVisible:!1,selectedId:"",loading:!1,propMap:[{slot:!1,name:"nickname",width:100,label:"昵称"},{slot:!1,name:"province",width:100,label:"省份"},{slot:!1,name:"city",width:100,label:"城市"},{slot:!1,name:"email",width:200,label:"邮箱"},{slot:!1,name:"site",width:100,label:"站点"},{slot:!1,name:"audit",width:60,label:"状态"},{slot:!1,name:"body",width:null,label:"内容"}]}},beforeMount(){this.initCmts()},methods:{initCmts(){this.loading=!0,this.comments.length=0,(0,m.NT)().then((t=>{t.data.status&&this.comments.push(...t.data.data)})).finally((()=>{this.loading=!1}))},rowClick(t,e,i){this.selectedId=t.id,this.dialogVisible=!0},commentDelete(){(0,m.Ru)({id:this.selectedId}).then((t=>{t.data.status?(d.X.success("删除成功！"),this.initCmts()):d.X.warning("删除失败！")})).catch((t=>{d.X.error("操作异常:"+t)})).finally((()=>{this.dialogVisible=!1}))},commentAudit(){(0,m.kw)({id:this.selectedId}).then((t=>{t.data.status?(d.X.success("评论已通过！"),this.initCmts()):d.X.warning("评论删除失败！")})).catch((t=>{d.X.error("操作异常："+t)})).finally((()=>{this.dialogVisible=!1}))}}},u=i(89);const h=(0,u.Z)(r,[["render",o],["__scopeId","data-v-c25b3414"]]);var p=h}}]);
//# sourceMappingURL=282.195970ce.js.map